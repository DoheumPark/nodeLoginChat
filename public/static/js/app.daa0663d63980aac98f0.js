webpackJsonp([1],{"78t9":function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("7+uW"),n=o("ppUw"),i=o.n(n),a=o("fpIu"),r=o.n(a),u={name:"App",data:function(){return{}},beforeCreate:function(){if(console.log("this.$store.state.user.i_user : "+this.$store.state.user.i_user),void 0==this.$store.state.user.i_user){var e=i.a.get(r.a.cookie.accessToken);if(console.log("token : "+e),void 0!=e){var t=i.a.get(r.a.cookie.user);if(null==t)return i.a.remove(r.a.cookie.accessToken),void i.a.remove(r.a.cookie.user);this.$axios.defaults.headers.common.Authorization="Bearer "+e,this.$store.commit("setUser",t),this.$socket.emit("login",t)}}},methods:{logout:function(){var e={i_user:this.$store.state.user.i_user};console.log("i_user : "+e.i_user);var t=this;this.$axios.post("/auth/logout",e).then(function(e){1==e.data&&(i.a.remove(r.a.cookie.accessToken),i.a.remove(r.a.cookie.user),t.$store.commit("setUser",{}),t.$router.push("/login"))})}},computed:{stateUser:function(){return this.$store.state.user}}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("nav",[void 0!=this.stateUser.i_user?t("button",{on:{click:this.logout}},[this._v("로그아웃")]):this._e()]),this._v(" "),t("section",[t("router-view")],1)])},staticRenderFns:[]};var l=o("VU/8")(u,c,!1,function(e){o("78t9"),o("ZE0F")},"data-v-587f8abf",null).exports,d=o("/ocq"),m={name:"UserList",props:{data:Array}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",e._l(e.data,function(t){return o("div",{key:t.socket_id},[e._v("\n        "+e._s(t.nick_nm)+"\n    ")])}),0)},staticRenderFns:[]},h={name:"Home",components:{UserList:o("VU/8")(m,p,!1,null,null,null).exports},data:function(){return{user:this.$store.state.user,userList:[]}},created:function(){var e=this;this.$axios.get("/users/getLoginUserList").then(function(t){console.log(t.data),e.userList=t.data})},beforeCreate:function(){console.log("i_user : "+this.$store.state.user.i_user)},sockets:{somebodyLogin:function(e){console.log("somebodyLogin : "+e.socket_id),console.log("somebodyLogin : "+e.nick_nm);var t={nick_nm:e.nick_nm,socket_id:e.socket_id};this.userList=this.userList.concat(t)},somebodyLogout:function(e){console.log("somebodyLogout : "+e)}},methods:{addUser:function(e){console.log("222222"),this.loginUserList[e.socket_id]=e},test:function(){this.$axios.get("/users/myinfo").then(function(e){console.log(e.data)})},test2:function(){this.$axios.get("/auth/test").then(function(e){console.log(e.data)})}}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"homeContainer"}},[t("UserList",{attrs:{data:this.userList}})],1)},staticRenderFns:[]};var f=o("VU/8")(h,v,!1,function(e){o("UkK/")},"data-v-2172003e",null).exports,g={name:"Join",data:function(){return{uid:"",upw:"",re_upw:"",nick_nm:""}},methods:{join:function(){console.log("---- start join ----");var e={uid:this.uid,upw:this.upw,nick_nm:this.nick_nm},t=this;this.$axios.post("/auth/join",e).then(function(e){switch(console.log("res.data : "+e.data),e.data){case 0:alert("회원가입에 실패하였습니다.");break;case 1:t.$router.push("/login");break;case 2:alert("아이디에 문제가 발생하였습니다.");break;case 3:alert("비밀번호에 문제가 발생하였습니다.")}}).catch(function(e){console.log("Cannot Join : "+e)})}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.uid,expression:"uid"}],attrs:{type:"text",placeholder:"아이디"},domProps:{value:e.uid},on:{input:function(t){t.target.composing||(e.uid=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.upw,expression:"upw"}],attrs:{type:"password",placeholder:"비밀번호"},domProps:{value:e.upw},on:{input:function(t){t.target.composing||(e.upw=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.re_upw,expression:"re_upw"}],attrs:{type:"password",placeholder:"확인 비밀번호"},domProps:{value:e.re_upw},on:{input:function(t){t.target.composing||(e.re_upw=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.nick_nm,expression:"nick_nm"}],attrs:{type:"text",placeholder:"닉네임"},domProps:{value:e.nick_nm},on:{input:function(t){t.target.composing||(e.nick_nm=t.target.value)}}}),o("br"),e._v(" "),o("button",{on:{click:e.join}},[e._v("Join")])])},staticRenderFns:[]},k=o("VU/8")(g,_,!1,null,null,null).exports,w=o("pFYg"),$=o.n(w),b={name:"Login",data:function(){return{uid:"",upw:""}},beforeCreate:function(){void 0==this.$store.state.user.i_user||this.$router.push("/home")},methods:{loginSucess:function(e,t){i.a.set(r.a.cookie.user,e),i.a.set(r.a.cookie.accessToken,t),this.$socket.emit("login",e),this.$store.commit("setUser",e),this.$axios.defaults.headers.common.Authorization="Bearer "+t,this.$router.push("/home")},login:function(){console.log("---- start login ----");var e={uid:this.uid,upw:this.upw},t=this;this.$axios.post("/auth/login",e).then(function(e){switch(console.log("res.data.status : "+e.data.status),console.log("typeof : "+$()(e.data.status)),e.data.status){case 1:t.loginSucess(e.data.user,e.data.token);break;case 0:alert("아이디 없음");break;case 2:alert("비번 틀림");break;case 3:alert("다중 로그인 시도 (다른 사람이 사용 중 입니다.)");break;default:alert("에러 발생")}}).catch(function(e){console.log("jjjjjjCannot log in : "+e)})},moveToJoin:function(){this.$router.push("/join")}}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.uid,expression:"uid"}],attrs:{type:"text"},domProps:{value:e.uid},on:{input:function(t){t.target.composing||(e.uid=t.target.value)}}}),o("br"),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.upw,expression:"upw"}],attrs:{type:"password"},domProps:{value:e.upw},on:{input:function(t){t.target.composing||(e.upw=t.target.value)}}}),o("br"),e._v(" "),o("button",{on:{click:e.login}},[e._v("로그인")]),e._v(" "),o("button",{on:{click:e.moveToJoin}},[e._v("회원가입")])])},staticRenderFns:[]},U=o("VU/8")(b,x,!1,null,null,null).exports,L={name:"ChatRoom",data:function(){return{}},beforeCreate:function(){},sockets:{customEmit:function(e){console.log("sockets - customEmit !!! : "+e),console.log('this method was fired by the socket server. eg: io.emit("customEmit", data)')}},methods:{}},y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("button",{on:{click:this.test}},[this._v("test")])])},staticRenderFns:[]},j=o("VU/8")(L,y,!1,null,null,null).exports;s.a.use(d.a);var C=new d.a({routes:[{path:"/login",name:"Login",component:U},{path:"/home",name:"Home",component:f},{path:"/join",name:"Join",component:k},{path:"/chatRoom",name:"ChatRoom",component:j}]}),E=o("mtWM"),F=o.n(E),N=o("NYxO"),P=o("HI0L"),R=o.n(P);s.a.use(N.a),s.a.use(i.a);var T=new N.a.Store({state:{user:{}},mutations:{setUser:function(e,t){e.user=t}},actions:{}});s.a.use(new R.a({debug:!0,connection:"http://192.168.219.100:8899",vuex:{store:T,actionPrefix:"",mutationPrefix:""}})),s.a.prototype.$axios=F.a,s.a.config.productionTip=!1,i.a.config("1h"),new s.a({el:"#app",router:C,components:{App:l},template:"<App/>",store:T})},"UkK/":function(e,t){},ZE0F:function(e,t){},fpIu:function(e,t){e.exports={cookie:{accessToken:"accessToken",user:"user"}}}},["NHnr"]);
//# sourceMappingURL=app.daa0663d63980aac98f0.js.map